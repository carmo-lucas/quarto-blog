<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>lucas carmo</title>
<link>https://lucascarmo.com.br/blog.html</link>
<atom:link href="https://lucascarmo.com.br/blog.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.3.450</generator>
<lastBuildDate>Sat, 11 Feb 2023 03:00:00 GMT</lastBuildDate>
<item>
  <title>Como criar eixos secundários no ggplot2</title>
  <dc:creator>Lucas Carmo</dc:creator>
  <link>https://lucascarmo.com.br/posts/eixos-secundarios/index.html</link>
  <description><![CDATA[ 




<section id="tldr" class="level1">
<h1>tl;dr</h1>
</section>
<section id="o-que-é-um-eixo-secundário" class="level1">
<h1>O que é um eixo secundário?</h1>
<p>Eixos secundários são comuns em gráficos para comparar duas ou mais variáveis dependentes ao longo de uma terceira variável independente. São úteis para a visualização de monitoramento de várias métricas com unidades diferentes ou para a comparação de duas variáveis que não são necessariamente relacionadas ou estão na mesma grandeza.</p>
<p>Alguns dos <em>softwares</em> de planilha que tem funcionalidades para criação de gráficos mais acessíveis possuem em seus menus a opção de adicionar um eixo y secundário.</p>
</section>
<section id="como-fazer-eixos-secundários-no-ggplot2" class="level1">
<h1>Como fazer eixos secundários no ggplot2?</h1>
<p>A documentação oficial do <code>ggplot2::</code> dá alguns exemplos simples de como criar um eixo secundário <code>y</code> ou <code>x</code> (<a href="https://ggplot2.tidyverse.org/reference/sec_axis.html">Specify a secondary axis</a>)</p>
<p>Porém a documentação não abrange todas as funcionalidades possíveis então nessa postagem vou buscar explorar mais as possibilidades de configurações de eixos secundários.</p>
</section>
<section id="gráfico-exemplo" class="level1 page-columns page-full">
<h1>Gráfico exemplo</h1>
<div class="cell page-columns page-full">
<details>
<summary><code>Code</code></summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb1-2"></span>
<span id="cb1-3">dataframe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb1-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span id="cb1-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb1-6">)</span>
<span id="cb1-7"></span>
<span id="cb1-8"></span>
<span id="cb1-9">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dataframe) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-10">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-11">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()</span>
<span id="cb1-12"></span>
<span id="cb1-13">p</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/gráfico-base-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption margin-caption">Gráfico base criado com valores aleatórios.</figcaption>
</figure>
</div>
</div>
</div>
<p>O gráfico acima é (<code>p</code>) é apenas a base para as próximas customizações.</p>
<p>De acordo com os exemplos na documentação, basta adicionar a função para configurar a escala do eixo y (ou x) ao gráfico original e com o argumento <code>sex.axis</code> especificar as configurações do segundo eixo. Usando <code>dup_axis()</code> como valor para o argumento, apenas será duplicado o eixo y do lado esquerdo para o direito. Porém usando o valor <code>sec.axis()</code></p>
<div id="fig-sec-axis" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<details>
<summary><code>Code</code></summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dup_axis</span>())</span>
<span id="cb2-2">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sec_axis</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log10</span>(.), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"log(y)"</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-sec-axis-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/fig-sec-axis-1.png" class="img-fluid figure-img" data-ref-parent="fig-sec-axis" width="672"></p>
<figcaption class="figure-caption">(a) dup_axis()</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-sec-axis-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/fig-sec-axis-2.png" class="img-fluid figure-img" data-ref-parent="fig-sec-axis" width="672"></p>
<figcaption class="figure-caption">(b) sec_axis(~ log10(y))</figcaption>
</figure>
</div>
</div>
<figcaption class="figure-caption">Figura&nbsp;1: Adição de eixos y secundários no lado direito.</figcaption>
</figure>
</div>
<p>Veja que ao criar um eixo secundário usando <code>sec_axis()</code> é possível aplicar uma transformação na escala do eixo. No exemplo acima foi aplicado a transformação <img src="https://latex.codecogs.com/png.latex?%5Clog_%7B10%7D%20y"> porem podem ser aplicadas outras transformações lineares, como multiplicação, exponenciação, soma, divisão etc.</p>
</section>
<section id="exemplo-mais-complexo" class="level1">
<h1>Exemplo mais complexo</h1>
<p>Nos exemplos acima apenas criei um gráfico com os dois eixos mas sem os dados relacionados ao eixo y do lado direito portanto abaixo irei especificar melhor os usos dos dois eixos.</p>
<div class="cell">
<details>
<summary><code>Code</code></summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">from =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">to =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>pi , <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>)</span>
<span id="cb3-2"></span>
<span id="cb3-3">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb3-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x,</span>
<span id="cb3-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seno =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sin</span>(x),</span>
<span id="cb3-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">exponencial =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(x)</span>
<span id="cb3-7">)</span>
<span id="cb3-8"></span>
<span id="cb3-9">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-10">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> seno), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"firebrick"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-11">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> exponencial), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"royalblue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-12">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sin x"</span>)</span>
<span id="cb3-13"></span>
<span id="cb3-14">p</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Função seno vs função exponencial</figcaption>
</figure>
</div>
</div>
</div>
<p>Acima se observa um gráfico com duas linhas, uma representando, uma função seno (vermelho), e outra função exponencial (azul), porém mal se percebe a “ondulação” da função seno por estar com uma amplitude aparente tão pequena em relação à função exponencial. Nesses casos que se é interessante utilizar o eixo secundário para comparar a variação entre as duas séries de dados.</p>
<p>Porém só criar o eixo secundário não significa que os dados irão automaticamente ser mapeados à nova escala criada. Como assim?</p>
<p>Os valores dos dados e os valores da escala são independentes. Para que eles sejam</p>
<p>Isso precisa ser feito ‘manualmente’, portanto é necessário transformar os dados de uma das séries de dados através de uma transformação linear.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1">coeficiente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2500</span></span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> seno <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> coeficiente), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"firebrick"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> exponencial), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"royalblue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sec_axis</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> . <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> coeficiente, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sin(x)"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exp(x)"</span>,</span>
<span id="cb4-8">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coeficiente = "</span>, coeficiente))</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-coeficiente" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/fig-coeficiente-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;2: Utilização de um coeficiente com valor constante para transformar os dados e a escala do eixo secundário.</figcaption>
</figure>
</div>
</div>
</div>
<p>Por exemplo, aplicando a multiplicação dos valores da função <img src="https://latex.codecogs.com/png.latex?%5Csin(x)"> por um coeficiente com valor 2500, (linha 4) os valores das duas funções irão se aproximar. Porém ao mesmo tempo eu preciso dividir a minha escala do eixo secundário pelo mesmo coeficiente (2500) para que os valores exibidos na escala sejam os antes da transformação (linha 7).</p>
<p>A Figura&nbsp;2 é um exemplo completo de como utilizar o coeficiente para transformar os dados.</p>
<p>Porém definir coeficientes manualmente é uma tarefa repetitiva e em alguns casos não muito intuitiva. Portanto podemos tentar definir o coeficiente de forma programática.</p>
</section>
<section id="calculando-o-coeficiente-ideal" class="level1">
<h1>Calculando o coeficiente ideal</h1>
<p>Nos exemplos anteriores chegamos em um coeficiente razoável de forma manual, testando valores e chegamos no valor de 2500 como sendo bom o suficiente para a aplicação.</p>
<p>Para calcularmos um coeficiente de forma programática podemos escrever uma função, que aceita todos os dados e nos retorna um valor, baseado em operações aritmméticas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1">calcular_coeficiente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(dados, var_1, var_2){</span>
<span id="cb5-2">    parametros <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dados <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-3">      dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb5-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max_var_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>({{ var_1 }}),</span>
<span id="cb5-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min_var_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>({{ var_1 }}),</span>
<span id="cb5-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max_var_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>({{ var_2 }}),</span>
<span id="cb5-7">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min_var_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>({{ var_2 }})</span>
<span id="cb5-8">        )</span>
<span id="cb5-9">    </span>
<span id="cb5-10">    coeficiente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>max_var_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>min_var_2) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span></span>
<span id="cb5-11">                   (parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>max_var_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>min_var_1)</span>
<span id="cb5-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(coeficiente)</span>
<span id="cb5-13">      }</span>
<span id="cb5-14"></span>
<span id="cb5-15">coeficiente_calculado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calcular_coeficiente</span>(df, seno, exponencial)</span></code></pre></div>
</div>
<p>Acima é demostrada uma função que calcula o coeficiente baseado nos valores máximos e mínimos das variáveis dadas a ela. O coeficiente calculado pela função tem o valor 258.5442863 e se utilizado para refazer o gráfico percebe-se que as duas curvas se sobrepõem de forma mais normalizada.</p>
<div class="cell">
<details>
<summary><code>Code</code></summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> seno <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> coeficiente_calculado), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"firebrick"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> exponencial), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"royalblue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sec_axis</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> . <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> coeficiente_calculado, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sin(x)"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exp(x)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coeficiente = "</span>, coeficiente_calculado))</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Porém o desafio é implementar o cálculo do coeficiente diretamente na construção do gráfico e também há o problema da ordem das variáveis na função.</p>
<section id="adequação-da-função-de-cálculo-dos-coeficientes" class="level2">
<h2 class="anchored" data-anchor-id="adequação-da-função-de-cálculo-dos-coeficientes">Adequação da função de cálculo dos coeficientes</h2>
<p>Da forma que a função foi construída o cálculo do coeficiente é feito da seguinte forma:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Acoef%20=%20%5Cfrac%7B%5Cmax%20(Var_2)%20-%20%5Cmin(Var_2)%7D%7B%5Cmax%20(Var_1)%20-%20%5Cmin(Var_1)%7D%0A"></p>
<p>Portanto se os valores da <img src="https://latex.codecogs.com/png.latex?Var_2"> apresentarem uma amplitude maior do que a amplitude dos valores da <img src="https://latex.codecogs.com/png.latex?Var_1"> o valor do coeficiente será positivo enquanto o inverso irá resultar em um coeficiente maior que zero e menor que 1 (<img src="https://latex.codecogs.com/png.latex?0%3Ccoef%3C1">), o que resultaria no gráfico abaixo, logo, a ordem das variáveis é importante no momento de executar a função.</p>
<div class="cell">
<details>
<summary><code>Code</code></summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ordem das variáveis invertida</span></span>
<span id="cb7-2">coef2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calcular_coeficiente</span>(df, exponencial, seno)</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> seno <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> coef2), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"firebrick"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> exponencial), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"royalblue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sec_axis</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> . <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> coef2, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sin(x)"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exp(x)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coeficiente = "</span>, coef2))</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Para resolver isso pode-se adicionar um bloco na função <code>calcular_coeficiente()</code> que verifica se <img src="https://latex.codecogs.com/png.latex?0%3Ccoef%3C1"> e inverter o valor se necessário, essa função nova será chamada: <code>calcular_coeficiente_smart()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1">calcular_coeficiente_smart <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(dados, var_1, var_2){</span>
<span id="cb8-2">    </span>
<span id="cb8-3">    parametros <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dados <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-4">      dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb8-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max_var_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>( {{ var_1 }} ),</span>
<span id="cb8-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min_var_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>( {{ var_1 }} ),</span>
<span id="cb8-7">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max_var_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>( {{ var_2 }} ),</span>
<span id="cb8-8">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min_var_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>( {{ var_2 }} )</span>
<span id="cb8-9">        )</span>
<span id="cb8-10"></span>
<span id="cb8-11">    coeficiente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>max_var_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>min_var_2) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span></span>
<span id="cb8-12">                   (parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>max_var_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>min_var_1)</span>
<span id="cb8-13"></span>
<span id="cb8-14">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(coeficiente <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> coeficiente <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb8-15">      coeficiente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>coeficiente)</span>
<span id="cb8-16">      }</span>
<span id="cb8-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(coeficiente)</span>
<span id="cb8-18">  }</span>
<span id="cb8-19"></span>
<span id="cb8-20">coeficientes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-21"></span>
<span id="cb8-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seno depois exponencial</span></span>
<span id="cb8-23">coeficiente_calculado_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calcular_coeficiente_smart</span>(df, seno, exponencial),</span>
<span id="cb8-24"></span>
<span id="cb8-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># exponencial depois seno</span></span>
<span id="cb8-26">coeficiente_calculado_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calcular_coeficiente_smart</span>(df, exponencial, seno)</span>
<span id="cb8-27">)</span>
<span id="cb8-28"></span>
<span id="cb8-29"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(coeficientes)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 258.5443

[[2]]
[1] 258.5443</code></pre>
</div>
</div>
<p>Agora independente da ordem das variáveis passadas à função o coeficiente calculado será sempre o valor esperado. Mas ainda falta implementar isso diretamente no gráfico.</p>
</section>
</section>
<section id="implementação-dos-coeficientes-no-gráfico" class="level1">
<h1>Implementação dos coeficientes no gráfico</h1>
<p>O que está faltando agora para finalizar o processo é criar uma função única para criar o gráfico com dois eixos. É possível fazer isso através de uma função única onde são passados o dataframe e as duas variáveis como argumentos e o <em>output</em> seria o gráfico completo.</p>
<section id="uma-função-que-faz-todas-as-operações-automaticamente" class="level2">
<h2 class="anchored" data-anchor-id="uma-função-que-faz-todas-as-operações-automaticamente">Uma função que faz todas as operações automaticamente</h2>
<p>Nessa função também deve se implementar o cálculo do coeficiente de forma a melhorar a legibilidade e tornar mais fácil para o usuário utilizar a função. Para criar essa função, o usar o código já escrito para calcular o coeficiente será usado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1">two_y_axis_plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(df, x, var_1, var_2){</span>
<span id="cb10-2"></span>
<span id="cb10-3">  parametros <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb10-5">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max_var_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>( {{ var_1 }} ),</span>
<span id="cb10-6">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min_var_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>( {{ var_1 }} ),</span>
<span id="cb10-7">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max_var_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>( {{ var_2 }} ),</span>
<span id="cb10-8">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min_var_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>( {{ var_2 }} )</span>
<span id="cb10-9">        )</span>
<span id="cb10-10"></span>
<span id="cb10-11">    coeficiente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>max_var_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>min_var_2) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span></span>
<span id="cb10-12">                   (parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>max_var_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> parametros<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>min_var_1)</span>
<span id="cb10-13"></span>
<span id="cb10-14">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(coeficiente <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> coeficiente <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb10-15">      coeficiente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>coeficiente)</span>
<span id="cb10-16">      }</span>
<span id="cb10-17"></span>
<span id="cb10-18">plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb10-19">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>({{ x }})) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-20">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> {{ var_1 }} <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> coeficiente), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"firebrick"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-21">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> {{ var_2 }}), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"royalblue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(</span>
<span id="cb10-23">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sec_axis</span>(</span>
<span id="cb10-24">        <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> . <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> coeficiente,</span>
<span id="cb10-25">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sin(x)"</span></span>
<span id="cb10-26">        )</span>
<span id="cb10-27">      ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-28">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb10-29">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exp(x)"</span>,</span>
<span id="cb10-30">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"two_y_axis_plot()"</span>,</span>
<span id="cb10-31">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coeficiente = "</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(coeficiente, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)))</span>
<span id="cb10-32"></span>
<span id="cb10-33"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(plot)</span>
<span id="cb10-34">}</span></code></pre></div>
</div>
<div class="cell">
<details>
<summary><code>Code</code></summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">two_y_axis_plot</span>(df, x, seno, exponencial)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Executando a função criada acima com os argumentos necessários</figcaption>
</figure>
</div>
</div>
</div>
<p>A função criada retorna automaticamente o gráfico com os dois eixos, com nomes e cores predefinidas mas com a o coeficiente calculado adequadamente. É possível transformar as customizações do gráfico em argumentos da função (como cores das linhas ou até que tipo de <code>geom</code> deverá ser usado), porém o aumento da complexidade da função não é o principal a se explorar no momento.</p>
<p>O que pode se explorar é que da mesma forma que foi criado um eixo y secundário, também pode ser criado um eixo x secundário, exatamente da mesma forma. Inclusive, é possível utilizar a função que foi criada para o gráfico de dois eixos y e adicionar novos elementos ao gráfico como linhas de referência usando <code>geom_vline</code> e <code>geom_hline</code>.</p>
<div class="cell">
<details>
<summary><code>Code</code></summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">two_y_axis_plot</span>(df, x, seno, exponencial) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(</span>
<span id="cb12-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb12-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sec_axis</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>  . <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> pi,</span>
<span id="cb12-5">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"radian(x)"</span>,</span>
<span id="cb12-6">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"\U03C0"</span>)</span>
<span id="cb12-7">    )</span>
<span id="cb12-8">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(pi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, pi), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dotted"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb12-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>())</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lucascarmo.com.br/posts/eixos-secundarios/index_files/figure-html/final-customizations-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Adição do eixo x secundário e linhas de referência</figcaption>
</figure>
</div>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>ggplot2</category>
  <category>dataviz</category>
  <guid>https://lucascarmo.com.br/posts/eixos-secundarios/index.html</guid>
  <pubDate>Sat, 11 Feb 2023 03:00:00 GMT</pubDate>
</item>
<item>
  <title>Usando o PowerToys para criar tarefas no ClickUp</title>
  <dc:creator>Lucas Carmo</dc:creator>
  <link>https://lucascarmo.com.br/posts/powertoys-run/index.html</link>
  <description><![CDATA[ 




<section id="tldr" class="level1">
<h1>tl;dr</h1>
<p>Este artigo descreve como utilizar o um software da microsoft chamado PowerToys Run para manipular informações no <a href="app.clickup.com">ClickUp</a>.</p>
</section>
<section id="porque-eu-quero-integrar-o-powertoys-ao-clickup" class="level1">
<h1>Porque eu quero integrar o PowerToys ao ClickUp?</h1>
<p>Eu tenho usado o clickup para registrar algumas tarefas pessoais e da empresa. O objetivo maior é escrever tarefas de uma forma ágil para que eu não tenha que entrar no site do clickup e navegar por várias janelas até achar o local certo para a criação da mesma.</p>
<section id="mas-o-que-é-o-powertoys" class="level2">
<h2 class="anchored" data-anchor-id="mas-o-que-é-o-powertoys">Mas o que é o PowerToys?</h2>
<p>PoywerToys é um software open-source, desenvolvido pela comunidade que incrementa a experiência do windows através de módulos de: seleção de cores; renomeação de arquivos; administração de janelas e utilitários de mouse e teclado e outros, porém a mais interessante destas ferramentas (para mim) é o PowerToys Run.</p>
<p>O Run é um módulo de pesquisa parecido com a busca do windows porém com funcionalidades extra. Através dele é possível calcular conversões de medidas, pesquisar arquivos, consultar cotações de moedas e navegar até URL. Contudo a mais poderosa dessas fuções é a execução de comandos no shell.</p>
</section>
</section>
<section id="como-fazer-isso" class="level1">
<h1>Como fazer isso?</h1>
<p>A primeira etapa foi criar o script em <code>.ps1</code> que execute a função que eu quero que faça: criar um arquivo de texto temporário que irá passar as informações para o workflow do <a href="https://www.n8n.io">n8n</a>.</p>
<section id="mas-o-que-é-n8n" class="level2">
<h2 class="anchored" data-anchor-id="mas-o-que-é-n8n">Mas o que é <a href="https://www.n8n.io">n8n</a>?</h2>
<p>O <a href="https://www.n8n.io">n8n</a> é um software que serve para criação de workflows baseados em nódulos (nodes). Cada node recebe dados de um ou mais nodes, processa-o e repassa para um ou mais nodes, ou seja, o dado inicial é processado através de várias etapas para que seja criada um dado final, geralmente, mas não necessariamente, com a intenção de gerar conhecimento.</p>
<hr>
<p>Eu nunca aprendi <code>powershell</code> então tive que ir atrás de referências de como criar uma função nesta linguagem que me permitisse passar o nome e a prioridade de uma nova tarefa.</p>
<p>A referência que eu usei para este script é de um <a href="https://www.youtube.com/watch?v=UVUd9_k9C6A&amp;t=20735s">vídeo</a> que explica como criar scripts e funções e demonstra como torná-los executáveis.</p>
<p>Eu aprendi que para que um script seja executável, é necessário que o arquivo seja salvo com a extensão <code>.ps1m</code> o que o identifica como sendo um módulo do powershell e também deve estar salvo no diretório <code>%user%\Documents\WindowsPowerShell\Modules\MeuModulo</code>. É importante também garantir que a pasta e o nome do arquivo sejam iguais.</p>
<p>Este script contém a seguinte função <code>task</code>:</p>
<div class="code-with-filename listing">
<p>Listing&nbsp;1: Função para Criar Tarefa</p>
<div class="code-with-filename-file">
<pre><strong>MeuModulo.ps1m</strong></pre>
</div>
<div class="sourceCode" id="lst-taskFunction" data-lst-cap="Função para Criar Tarefa" style="background: #f1f3f5;"><pre class="sourceCode numberSource powershell number-lines code-with-copy"><code class="sourceCode powershell"><span id="lst-taskFunction-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> task <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="lst-taskFunction-2"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span>CmdletBinding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">()]</span></span>
<span id="lst-taskFunction-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">param</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span id="lst-taskFunction-4">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span>Parameter<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>Mandatory<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$True</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)]</span></span>
<span id="lst-taskFunction-5">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$nome</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> $1<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="lst-taskFunction-6">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$prioridade</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> $2</span>
<span id="lst-taskFunction-7">  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="lst-taskFunction-8"></span>
<span id="lst-taskFunction-9"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$json</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{</span></span>
<span id="lst-taskFunction-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>name<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$nome</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="lst-taskFunction-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>priority<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$prioridade</span></span>
<span id="lst-taskFunction-12"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="lst-taskFunction-13"></span>
<span id="lst-taskFunction-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Out-File</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>InputObject <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$json</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>FilePath <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~\Automations.json"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Encoding utf8</span>
<span id="lst-taskFunction-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">exit</span></span>
<span id="lst-taskFunction-16"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
</div>
<p>A função <code>task</code> aceita dois argumentos; o nome e prioridade da tarefa e salva-os em um arquivo que será usado como uma forma de cache para a execução das etapas seguintes do workflow. Este arquivo é formatado no modelo <code>json</code> para que sejam facilmente lidas pelo <a href="https://www.n8n.io">n8n</a> posteriormente.</p>
<p>Assim que o arquivo <code>json</code> é criado, o <a href="https://www.n8n.io">n8n</a> inicia a automação que foi configurada e manda as informações para o ClickUp.</p>
<p>O arquivo criado pela função tem esta estrutura:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Automations.json</strong></pre>
</div>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource json number-lines code-with-copy"><code class="sourceCode json"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb1-2">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Aqui vai o nome da tarefa a ser criada"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb1-3">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"priority"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
</div>
<p>Até aí tudo certo mas como que eu faço para executar esta função?</p>
</section>
</section>
<section id="resolvendo-as-questões-do-powertoys-run" class="level1">
<h1>Resolvendo as questões do PowerToys Run</h1>
<p>O PowerToys Run é capaz de executar commandos no prompt <code>cmd</code> automaticamente através da sua interface usando <code>&gt;</code> como prefixo.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lucascarmo.com.br/posts/powertoys-run/powertoysrun.png" class="img-fluid figure-img" alt="screenshot a interface do powertoys run"></p>
<figcaption class="figure-caption">Prompt do PowerToys Run</figcaption>
</figure>
</div>
<p>Porém como eu escrevi a função em <code>ps1</code>, ela não é executável através do prompt <code>cmd</code>, portanto deve-se configurar o powertoys para utilizar o prompt do powershell como default. Isso é feito através da modificação do arquivo <code>ShellPluginSettings.json</code> localizado em <code>%localappdata%\Microsoft\PowerToys\PowerToys Run\Settings\Plugins\Microsoft.Plugin.Shell</code>. Onde a configuração para <code>Shell</code> deve ser alterada de 2 para 1.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ShellPluginSettings.json</strong></pre>
</div>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource json number-lines code-with-copy"><code class="sourceCode json"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-2">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"Shell"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">\\</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">Mudar</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">de</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">para</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb2-3">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"ReplaceWinR"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">false</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-4">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"LeaveShellOpen"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">false</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-5">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"RunAsAdministrator"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">false</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-6">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"Count"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{}</span></span>
<span id="cb2-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
</div>
<p>Para que a alteração tenha efeito, feche o PowerToys, mude a configuração e depois abra-o novamente. A desvantagem de usar o shell do powershell é que ele não é fechado automaticamente por isso eu inseri <code>exit</code> na linha 17 de Listing&nbsp;1.</p>
</section>
<section id="como-configurar-o-workflow-do-n8n" class="level1">
<h1>Como configurar o workflow do <a href="https://www.n8n.io">n8n</a>?</h1>
<p>Tendo finalizado as etapas acima é necessário configura um workflow do <a href="https://www.n8n.io">n8n</a> para a criação da tarefa. De forma simplificada o workflow deverá ter 4 nodes:</p>
<ol type="1">
<li>Monitora quando o arquivo é alterado</li>
<li>Lê o arquivo</li>
<li>Converte arquivo para json</li>
<li>Envia informações contidas no arquivo para o ClickUp</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lucascarmo.com.br/posts/powertoys-run/n8nexample.png" class="img-fluid figure-img" alt="screenshot da interface de um exemplo de workflow do n8n"></p>
<figcaption class="figure-caption">Exemplo de workflow do n8n</figcaption>
</figure>
</div>
<p>Adicionalmente podem ser adicionados nodes para tratamento de erros ou com lógica de condicionais mas isso vou deixar para outro post.</p>


</section>

 ]]></description>
  <category>powershell</category>
  <category>powertoys</category>
  <category>n8n</category>
  <category>clickup</category>
  <guid>https://lucascarmo.com.br/posts/powertoys-run/index.html</guid>
  <pubDate>Thu, 14 Jul 2022 03:00:00 GMT</pubDate>
</item>
</channel>
</rss>
